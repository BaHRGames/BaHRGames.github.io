<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Clicker Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .user-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            backdrop-filter: blur(10px);
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            border: 2px solid #fff;
        }
        
        .user-details {
            flex-grow: 1;
        }
        
        .user-name {
            font-weight: bold;
            font-size: 18px;
        }
        
        .user-clicks {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .click-area {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .click-area:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.25);
        }
        
        .click-button {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .click-count {
            font-size: 42px;
            font-weight: bold;
            margin: 15px 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .prizes-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .section-title {
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .prizes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .prize-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .prize-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .prize-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }
        
        .prize-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .prize-cost {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .stats-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .leaderboard {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .leaderboard-position {
            font-weight: bold;
            margin-right: 10px;
            width: 25px;
        }
        
        .leaderboard-name {
            flex-grow: 1;
        }
        
        .leaderboard-score {
            font-weight: bold;
        }
        
        @media (max-width: 500px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .click-count {
                font-size: 36px;
            }
            
            .prizes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ú® –ö–ª–∏–∫–µ—Ä —Å –ü—Ä–∏–∑–∞–º–∏</h1>
            <p>–ö–ª–∏–∫–∞–π –∏ –ø–æ–ª—É—á–∞–π –Ω–∞–≥—Ä–∞–¥—ã!</p>
        </div>
        
        <div class="user-info">
            <img id="user-avatar" class="user-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä">
            <div class="user-details">
                <div id="user-name" class="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="user-clicks">–ö–ª–∏–∫–æ–≤: <span id="user-clicks-count">0</span></div>
            </div>
        </div>
        
        <div class="click-area" id="click-area">
            <div class="click-button">–ö–õ–ò–ö–ê–ô!</div>
            <div class="click-count" id="click-count">0</div>
            <div>–ö–ª–∏–∫–æ–≤</div>
        </div>
        
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-value" id="clicks-per-second">0</div>
                <div class="stat-label">–ö–ª–∏–∫–æ–≤/—Å–µ–∫</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-prizes">0</div>
                <div class="stat-label">–ü–æ–ª—É—á–µ–Ω–æ –ø—Ä–∏–∑–æ–≤</div>
            </div>
        </div>
        
        <div class="prizes-section">
            <div class="section-title">üéÅ –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∏–∑—ã</div>
            <div class="prizes-grid">
                <div class="prize-item" data-cost="10">
                    <div class="prize-icon">üç¨</div>
                    <div class="prize-name">–ö–æ–Ω—Ñ–µ—Ç–∞</div>
                    <div class="prize-cost">10 –∫–ª–∏–∫–æ–≤</div>
                </div>
                <div class="prize-item" data-cost="50">
                    <div class="prize-icon">‚òï</div>
                    <div class="prize-name">–ö–æ—Ñ–µ</div>
                    <div class="prize-cost">50 –∫–ª–∏–∫–æ–≤</div>
                </div>
                <div class="prize-item" data-cost="100">
                    <div class="prize-icon">üéÆ</div>
                    <div class="prize-name">–ò–≥—Ä–∞</div>
                    <div class="prize-cost">100 –∫–ª–∏–∫–æ–≤</div>
                </div>
                <div class="prize-item" data-cost="200">
                    <div class="prize-icon">üçï</div>
                    <div class="prize-name">–ü–∏—Ü—Ü–∞</div>
                    <div class="prize-cost">200 –∫–ª–∏–∫–æ–≤</div>
                </div>
                <div class="prize-item" data-cost="500">
                    <div class="prize-icon">üéÅ</div>
                                       <div class="prize-name">–ü–æ–¥–∞—Ä–æ–∫</div>
                    <div class="prize-cost">500 –∫–ª–∏–∫–æ–≤</div>
                </div>
                <div class="prize-item" data-cost="1000">
                    <div class="prize-icon">üèÜ</div>
                    <div class="prize-name">–¢—Ä–æ—Ñ–µ–π</div>
                    <div class="prize-cost">1000 –∫–ª–∏–∫–æ–≤</div>
                </div>
            </div>
        </div>
        
        <div class="leaderboard">
            <div class="section-title">üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</div>
            <div id="leaderboard-list">
                <div class="leaderboard-item">
                    <div class="leaderboard-position">1</div>
                    <div class="leaderboard-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="leaderboard-score">0</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        
        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let user = tg.initDataUnsafe.user;
        let clicks = 0;
        let clicksPerSecond = 0;
        let prizes = 0;
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const clickCountElement = document.getElementById('click-count');
        const userClicksCountElement = document.getElementById('user-clicks-count');
        const userNameElement = document.getElementById('user-name');
        const userAvatarElement = document.getElementById('user-avatar');
        const clicksPerSecondElement = document.getElementById('clicks-per-second');
        const totalPrizesElement = document.getElementById('total-prizes');
        const clickArea = document.getElementById('click-area');
        const prizeItems = document.querySelectorAll('.prize-item');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (user) {
            userNameElement.textContent = `${user.first_name || ''} ${user.last_name || ''}`.trim() || user.username;
            userAvatarElement.src = user.photo_url || 'https://via.placeholder.com/50';
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
            const savedData = localStorage.getItem(`tg_user_${user.id}`);
            if (savedData) {
                const userData = JSON.parse(savedData);
                clicks = userData.clicks || 0;
                clicksPerSecond = userData.clicksPerSecond || 0;
                prizes = userData.prizes || 0;
            }
            
            updateUI();
        } else {
            userNameElement.textContent = "–ì–æ—Å—Ç—å";
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
        clickArea.addEventListener('click', () => {
            clicks++;
            updateUI();
            saveUserData();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
            clickArea.style.transform = 'scale(0.95)';
            setTimeout(() => {
                clickArea.style.transform = 'scale(1)';
            }, 100);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ "+1"
            const plusOne = document.createElement('div');
            plusOne.textContent = '+1';
            plusOne.style.position = 'absolute';
            plusOne.style.color = '#fff';
            plusOne.style.fontWeight = 'bold';
            plusOne.style.fontSize = '20px';
            plusOne.style.pointerEvents = 'none';
            plusOne.style.animation = 'floatUp 1s ease-out forwards';
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±–ª–∞—Å—Ç–∏ –∫–ª–∏–∫–∞
            const rect = clickArea.getBoundingClientRect();
            plusOne.style.left = `${rect.width / 2}px`;
            plusOne.style.top = `${rect.height / 2}px`;
            
            clickArea.style.position = 'relative';
            clickArea.appendChild(plusOne);
            
            setTimeout(() => {
                clickArea.removeChild(plusOne);
            }, 1000);
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–∏–∑–æ–≤
        prizeItems.forEach(prize => {
            prize.addEventListener('click', () => {
                const cost = parseInt(prize.getAttribute('data-cost'));
                if (clicks >= cost) {
                    clicks -= cost;
                    prizes++;
                    updateUI();
                    saveUserData();
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–∑–∞
                    prize.style.backgroundColor = 'rgba(255, 215, 0, 0.3)';
                    setTimeout(() => {
                        prize.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                    }, 300);
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    tg.showPopup({
                        title: '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ',
                        message: `–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–∏–∑: ${prize.querySelector('.prize-name').textContent}`,
                        buttons: [{type: 'ok'}]
                    });
                } else {
                    // –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤
                    prize.style.backgroundColor = 'rgba(255, 0, 0, 0.3)';
                    setTimeout(() => {
                        prize.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                    }, 300);
                    
                    tg.showPopup({
                        title: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∏–∫–æ–≤ üò¢',
                        message: `–ù—É–∂–Ω–æ –µ—â–µ ${cost - clicks} –∫–ª–∏–∫–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–∑–∞`,
                        buttons: [{type: 'ok'}]
                    });
                }
            });
        });
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            clickCountElement.textContent = clicks;
            userClicksCountElement.textContent = clicks;
            clicksPerSecondElement.textContent = clicksPerSecond;
            totalPrizesElement.textContent = prizes;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–∑–æ–≤
            prizeItems.forEach(prize => {
                const cost = parseInt(prize.getAttribute('data-cost'));
                if (clicks >= cost) {
                    prize.style.opacity = '1';
                    prize.style.cursor = 'pointer';
                } else {
                    prize.style.opacity = '0.6';
                    prize.style.cursor = 'not-allowed';
                }
            });
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function saveUserData() {
            if (user) {
                const userData = {
                    clicks: clicks,
                    clicksPerSecond: clicksPerSecond,
                    prizes: prizes,
                    lastUpdate: new Date().getTime()
                };
                localStorage.setItem(`tg_user_${user.id}`, JSON.stringify(userData));
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
        function loadLeaderboard() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            // –î–ª—è –¥–µ–º–æ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const leaderboardList = document.getElementById('leaderboard-list');
            leaderboardList.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –Ω–∞—á–∞–ª–æ
            if (user) {
                const userItem = document.createElement('div');
                userItem.className = 'leaderboard-item';
                userItem.innerHTML = `
                    <div class="leaderboard-position">-</div>
                    <div class="leaderboard-name">${user.first_name || user.username}</div>
                    <div class="leaderboard-score">${clicks}</div>
                `;
                leaderboardList.appendChild(userItem);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–≥–∏—Ö "–∏–≥—Ä–æ–∫–æ–≤"
            const fakeUsers = [
                {name: "–ê–Ω–Ω–∞", score: 1250},
                {name: "–ò–≤–∞–Ω", score: 980},
                {name: "–ú–∞—Ä–∏—è", score: 765},
                {name: "–ê–ª–µ–∫—Å–µ–π", score: 542},
                {name: "–û–ª—å–≥–∞", score: 321}
            ];
            
            fakeUsers.forEach((user, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div class="leaderboard-position">${index + 1}</div>
                    <div class="leaderboard-name">${user.name}</div>
                    <div class="leaderboard-score">${user.score}</div>
                `;
                leaderboardList.appendChild(item);
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            loadLeaderboard();
            
            // –ê–≤—Ç–æ–∫–ª–∏–∫–∏ (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
            setInterval(() => {
                clicks += clicksPerSecond;
                updateUI();
                saveUserData();
            }, 1000);
            
            // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
            setTimeout(() => {
                tg.showPopup({
                    title: '–£–ª—É—á—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ! ‚ö°',
                    message: '–í—ã –º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä –∑–∞ 200 –∫–ª–∏–∫–æ–≤',
                    buttons: [{type: 'cancel'}, {type: 'default', text: '–ö—É–ø–∏—Ç—å'}]
                }).then(buttonId => {
                    if (buttonId === 1 && clicks >= 200) {
                        clicks -= 200;
                        clicksPerSecond += 1;
                        updateUI();
                        saveUserData();
                        tg.showPopup({
                            title: '–£—Å–ø–µ—Ö!',
                            message: '–¢–µ–ø–µ—Ä—å –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 1 –∫–ª–∏–∫ –≤ —Å–µ–∫—É–Ω–¥—É',
                            buttons: [{type: 'ok'}]
                        });
                    }
                });
            }, 10000);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% { 
                    opacity: 1;
                    transform: translateY(0);
                }
                100% { 
                    opacity: 0;
                    transform: translateY(-30px);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>