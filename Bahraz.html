<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bahraz Casino</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-tertiary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --accent: #bb86fc;
            --accent-secondary: #03dac6;
            --danger: #cf6679;
            --success: #4caf50;
            --rarity-common: #727272;
            --rarity-rare: #558bcc;
            --rarity-epic: #ab47bc;
            --rarity-legendary: #f9a825;
            --rarity-mythical: #e53935;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            position: relative;
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            padding-bottom: 70px;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .nav-tabs {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            background-color: var(--bg-secondary);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }

        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .nav-tab.active {
            color: var(--accent);
        }

        .nav-tab i {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-tab span {
            font-size: 12px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ */
        .shop-items {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .shop-item {
            background-color: var(--bg-tertiary);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .shop-item:active {
            transform: scale(0.97);
        }

        .shop-item-image {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
            font-size: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .shop-item:hover .shop-item-image {
            transform: scale(1.1);
        }

        .shop-item-name {
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .shop-item-description {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            min-height: 32px;
        }

        .shop-item-price {
            color: var(--accent);
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 500;
        }

        .buy-btn {
            background: linear-gradient(45deg, var(--accent), var(--accent-secondary));
            color: white;
            border: none;
            padding: 10px 0;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .buy-btn:active {
            transform: scale(0.95);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è */
        .inventory-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
        }

        .combine-btn {
            background: linear-gradient(45deg, var(--accent), var(--accent-secondary));
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .inventory-item {
            background-color: var(--bg-tertiary);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 1/1;
            transition: transform 0.2s;
        }

        .inventory-item:active {
            transform: scale(0.95);
        }

        .inventory-item.selected {
            box-shadow: 0 0 0 3px var(--accent);
        }

        .item-image {
            width: 100%;
            height: 70%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .item-info {
            padding: 8px;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.4);
        }

        .item-name {
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .item-rarity {
            font-size: 10px;
            opacity: 0.8;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--accent), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-right: 16px;
            color: white;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .profile-balance {
            color: var(--accent);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profile-balance i {
            font-size: 20px;
        }

        .stats-section {
            background-color: var(--bg-secondary);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .promo-section {
            background-color: var(--bg-secondary);
            border-radius: 16px;
            padding: 20px;
        }

        .promo-input {
            display: flex;
            margin-bottom: 16px;
        }

        .promo-input input {
            flex: 1;
            background-color: var(--bg-tertiary);
            border: none;
            border-radius: 12px 0 0 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            outline: none;
        }

        .promo-input button {
            background: linear-gradient(45deg, var(--accent), var(--accent-secondary));
            color: white;
            border: none;
            border-radius: 0 12px 12px 0;
            padding: 0 20px;
            cursor: pointer;
            font-weight: 500;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è —Ä—É–ª–µ—Ç–∫–∏ */
        .roulette-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .roulette-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .roulette-container {
            width: 300px;
            height: 400px;
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            background-color: var(--bg-secondary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .roulette-items {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            transition: top 5s cubic-bezier(0.17, 0.67, 0.21, 0.99);
        }

        .roulette-item {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .roulette-center {
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            transform: translateY(-50%);
        }

        .roulette-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 1001;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–∑–∞ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: var(--bg-secondary);
            border-radius: 20px;
            padding: 24px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-prize {
            font-size: 64px;
            margin: 20px 0;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .modal-rarity {
            font-size: 16px;
            margin-bottom: 20px;
            padding: 6px 16px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }

        .modal-price {
            margin-bottom: 24px;
            font-size: 18px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .modal-btn:active {
            transform: scale(0.95);
        }

        .modal-btn-sell {
            background: linear-gradient(45deg, #ff4b4b, #d30000);
            color: white;
        }

        .modal-btn-close {
            background: linear-gradient(45deg, var(--bg-tertiary), #3d3d3d);
            color: var(--text-primary);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .celebrate {
            animation: celebrate 0.5s ease-in-out;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–¥–∫–æ—Å—Ç–µ–π */
        .common { color: var(--rarity-common); background-color: rgba(114, 114, 114, 0.2); }
        .rare { color: var(--rarity-rare); background-color: rgba(85, 139, 204, 0.2); }
        .epic { color: var(--rarity-epic); background-color: rgba(171, 71, 188, 0.2); }
        .legendary { color: var(--rarity-legendary); background-color: rgba(249, 168, 37, 0.2); }
        .mythical { color: var(--rarity-mythical); background-color: rgba(229, 57, 53, 0.2); }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 360px) {
            .shop-items {
                grid-template-columns: 1fr;
            }
            
            .inventory-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-avatar {
                margin-right: 0;
                margin-bottom: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="content-area">
            <!-- –í–∫–ª–∞–¥–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ -->
            <div id="shop-tab" class="tab-content active">
                <h2>–ú–∞–≥–∞–∑–∏–Ω –î—Ä–æ–ø–æ–≤</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">–ü—Ä–∏–æ–±—Ä–µ—Ç–∞–π—Ç–µ –¥—Ä–æ–ø—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã</p>
                <div class="shop-items">
                    <div class="shop-item">
                        <div class="shop-item-image">üì¶</div>
                        <div class="shop-item-name">–û–±—ã—á–Ω—ã–π –¥—Ä–æ–ø</div>
                        <div class="shop-item-description">–®–∞–Ω—Å –Ω–∞ –æ–±—ã—á–Ω—ã–µ –∏ —Ä–µ–¥–∫–∏–µ –ø—Ä–∏–∑—ã</div>
                        <div class="shop-item-price">100 –º–æ–Ω–µ—Ç</div>
                        <button class="buy-btn" data-type="common">–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                    <div class="shop-item">
                        <div class="shop-item-image" style="font-size: 45px;">üì¶</div>
                        <div class="shop-item-name">–†–µ–¥–∫–∏–π –¥—Ä–æ–ø</div>
                        <div class="shop-item-description">–®–∞–Ω—Å –Ω–∞ —Ä–µ–¥–∫–∏–µ –∏ —ç–ø–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑—ã</div>
                        <div class="shop-item-price">250 –º–æ–Ω–µ—Ç</div>
                        <button class="buy-btn" data-type="rare">–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                    <div class="shop-item">
                        <div class="shop-item-image" style="font-size: 40px;">üì¶</div>
                        <div class="shop-item-name">–≠–ø–∏—á–µ—Å–∫–∏–π –¥—Ä–æ–ø</div>
                        <div class="shop-item-description">–®–∞–Ω—Å –Ω–∞ —ç–ø–∏—á–µ—Å–∫–∏–µ –∏ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –ø—Ä–∏–∑—ã</div>
                        <div class="shop-item-price">500 –º–æ–Ω–µ—Ç</div>
                        <button class="buy-btn" data-type="epic">–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                    <div class="shop-item">
                        <div class="shop-item-image" style="font-size: 35px;">üì¶</div>
                        <div class="shop-item-name">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –¥—Ä–æ–ø</div>
                        <div class="shop-item-description">–®–∞–Ω—Å –Ω–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –∏ –º–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑—ã</div>
                        <div class="shop-item-price">1000 –º–æ–Ω–µ—Ç</div>
                        <button class="buy-btn" data-type="legendary">–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                    <div class="shop-item">
                        <div class="shop-item-image" style="font-size: 30px;">üì¶</div>
                        <div class="shop-item-name">–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –¥—Ä–æ–ø</div>
                        <div class="shop-item-description">–í—ã—Å–æ–∫–∏–π —à–∞–Ω—Å –Ω–∞ –º–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑—ã</div>
                        <div class="shop-item-price">2000 –º–æ–Ω–µ—Ç</div>
                        <button class="buy-btn" data-type="mythical">–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è -->
            <div id="inventory-tab" class="tab-content">
                <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <div class="inventory-header">
                    <p style="color: var(--text-secondary);">–í–∞—à–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑—ã: <span id="inventory-count">0</span></p>
                    <button class="combine-btn" id="combine-btn">
                        <i>üîÑ</i> –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
                    </button>
                </div>
                <div class="inventory-grid" id="inventory-grid">
                    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div id="profile-tab" class="tab-content">
                <div class="profile-header">
                    <div class="profile-avatar" id="user-avatar">U</div>
                    <div class="profile-info">
                        <div class="profile-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                        <div class="profile-balance">
                            <i>üí∞</i> <span id="user-balance">1000</span> –º–æ–Ω–µ—Ç
                        </div>
                    </div>
                </div>

                <div class="stats-section">
                    <div class="section-title">
                        <i>üìä</i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </div>
                    <div class="stat-item">
                        <span>–û—Ç–∫—Ä—ã—Ç–æ –¥—Ä–æ–ø–æ–≤:</span>
                        <span id="stats-opened">0</span>
                    </div>
                    <div class="stat-item">
                        <span>–í—Å–µ–≥–æ –ø—Ä–∏–∑–æ–≤:</span>
                        <span id="stats-total">0</span>
                    </div>
                    <div class="stat-item">
                        <span>–°–∞–º—ã–π —Ä–µ–¥–∫–∏–π –ø—Ä–∏–∑:</span>
                        <span id="stats-rarest">–ù–µ—Ç</span>
                    </div>
                    <div class="stat-item">
                        <span>–ü—Ä–æ–¥–∞–Ω–æ –ø—Ä–∏–∑–æ–≤:</span>
                        <span id="stats-sold">0</span>
                    </div>
                </div>

                <div class="promo-section">
                    <div class="section-title">
                        <i>üéüÔ∏è</i> –ü—Ä–æ–º–æ–∫–æ–¥
                    </div>
                    <div class="promo-input">
                        <input type="text" id="promo-code" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
                        <button id="apply-promo">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                    <div id="promo-message"></div>
                </div>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="shop-tab">
                <i>üõí</i>
                <span>–ú–∞–≥–∞–∑–∏–Ω</span>
            </div>
            <div class="nav-tab" data-tab="inventory-tab">
                <i>üéí</i>
                <span>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
            </div>
            <div class="nav-tab" data-tab="profile-tab">
                <i>üë§</i>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
        </div>
    </div>

    <!-- –†—É–ª–µ—Ç–∫–∞ -->
    <div class="roulette-overlay" id="roulette-overlay">
        <button class="roulette-close" id="roulette-close">‚úï</button>
        <div class="roulette-container">
            <div class="roulette-center"></div>
            <div class="roulette-items" id="roulette-items">
                <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —Ä—É–ª–µ—Ç–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–∑–∞ -->
    <div class="modal-overlay" id="prize-modal">
        <div class="modal-content">
            <div class="modal-prize" id="modal-prize-emoji">üéÅ</div>
            <h2 class="modal-title" id="modal-prize-name">–ü—Ä–∏–∑</h2>
            <div class="modal-rarity" id="modal-prize-rarity">–û–±—ã—á–Ω—ã–π</div>
            <p class="modal-price">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: <span id="modal-prize-price">50</span> –º–æ–Ω–µ—Ç</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-sell" id="modal-sell-btn">–ü—Ä–æ–¥–∞—Ç—å</button>
                <button class="modal-btn modal-btn-close" id="modal-close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
            let tg = window.Telegram.WebApp;
            tg.expand();
            tg.enableClosingConfirmation();
            
            // –≠–º—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–µ –≤ Telegram
            let userData = {
                id: tg.initDataUnsafe?.user?.id || 123456789,
                firstName: tg.initDataUnsafe?.user?.first_name || '–¢–µ–ª–µ–≥—Ä–∞–º',
                lastName: tg.initDataUnsafe?.user?.last_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                avatar: null,
                coins: 1000,
                openedDrops: 0,
                soldItems: 0,
                inventory: [],
                rarestItem: null
            };

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function updateUserInterface() {
                document.getElementById('user-name').textContent = `${userData.firstName} ${userData.lastName}`;
                document.getElementById('user-balance').textContent = `${userData.coins}`;
                document.getElementById('user-avatar').textContent = userData.firstName.charAt(0);
                document.getElementById('stats-opened').textContent = userData.openedDrops;
                document.getElementById('stats-total').textContent = userData.inventory.length;
                document.getElementById('stats-sold').textContent = userData.soldItems;
                document.getElementById('inventory-count').textContent = userData.inventory.length;
                document.getElementById('stats-rarest').textContent = userData.rarestItem ? 
                    `${userData.rarestItem.name} (${getRarityName(userData.rarestItem.rarity)})` : '–ù–µ—Ç';
            }

            // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
            const items = [
                { id: 1, name: "–†–æ–∑–∞", emoji: "üåπ", rarity: "common", color: "red", price: 50 },
                { id: 2, name: "–ö—É–±–æ–∫", emoji: "üèÜ", rarity: "rare", color: "gold", price: 100 },
                { id: 3, name: "–°–µ—Ä–¥–µ—á–∫–æ", emoji: "üíñ", rarity: "common", color: "pink", price: 40 },
                { id: 4, name: "–ö–ª–µ–≤–µ—Ä", emoji: "üçÄ", rarity: "common", color: "green", price: 45 },
                { id: 5, name: "–õ—É–Ω–∞", emoji: "üåô", rarity: "rare", color: "silver", price: 110 },
                { id: 6, name: "–ó–≤–µ–∑–¥–∞", emoji: "‚≠ê", rarity: "common", color: "yellow", price: 55 },
                { id: 7, name: "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä", emoji: "üî•", rarity: "epic", color: "orange", price: 200 },
                { id: 8, name: "–ö–æ—Ä–æ–Ω–∞", emoji: "üëë", rarity: "legendary", color: "gold", price: 500 },
                { id: 9, name: "–ê–Ω–≥–µ–ª", emoji: "üëº", rarity: "epic", color: "white", price: 250 },
                { id: 10, name: "–î—Ä–∞–∫–æ–Ω", emoji: "üêâ", rarity: "mythical", color: "purple", price: 1000 },
                { id: 11, name: "–ö–Ω–∏–≥–∞", emoji: "üìñ", rarity: "common", color: "brown", price: 60 },
                { id: 12, name: "–©–∏—Ç", emoji: "üõ°Ô∏è", rarity: "rare", color: "steel", price: 120 },
                { id: 13, name: "–ú–µ—á", emoji: "‚öîÔ∏è", rarity: "epic", color: "silver", price: 220 },
                { id: 14, name: "–ö–æ–ª—å—Ü–æ", emoji: "üíç", rarity: "legendary", color: "gold", price: 550 },
                { id: 15, name: "–°—Ñ–µ—Ä–∞", emoji: "üîÆ", rarity: "mythical", color: "purple", price: 1100 },
                { id: 16, name: "–ß–∞—Å—ã", emoji: "‚åö", rarity: "rare", color: "black", price: 130 },
                { id: 17, name: "–ö–ª—é—á", emoji: "üîë", rarity: "common", color: "bronze", price: 70 },
                { id: 18, name: "–ú–æ–ª–Ω–∏—è", emoji: "‚ö°", rarity: "epic", color: "yellow", price: 230 },
                { id: 19, name: "–ß–µ—Ä–µ–ø", emoji: "üíÄ", rarity: "rare", color: "white", price: 140 },
                { id: 20, name: "–†–∞–¥—É–≥–∞", emoji: "üåà", rarity: "legendary", color: "multicolor", price: 600 },
                { id: 21, name: "–°–Ω–µ–∂–∏–Ω–∫–∞", emoji: "‚ùÑÔ∏è", rarity: "common", color: "blue", price: 65 },
                { id: 22, name: "–Ø–±–ª–æ–∫–æ", emoji: "üçé", rarity: "common", color: "red", price: 45 },
                { id: 23, name: "–°–∞–ø—Ñ–∏—Ä", emoji: "üíé", rarity: "epic", color: "blue", price: 270 },
                { id: 24, name: "–§–µ–Ω–∏–∫—Å", emoji: "ü¶ö", rarity: "mythical", color: "red", price: 1200 },
                { id: 25, name: "–ì–ª–æ–±—É—Å", emoji: "üåé", rarity: "legendary", color: "blue", price: 650 }
            ];

            const drops = {
                common: { price: 100, chances: { common: 70, rare: 25, epic: 5, legendary: 0, mythical: 0 } },
                rare: { price: 250, chances: { common: 50, rare: 35, epic: 10, legendary: 5, mythical: 0 } },
                epic: { price: 500, chances: { common: 30, rare: 40, epic: 20, legendary: 8, mythical: 2 } },
                legendary: { price: 1000, chances: { common: 10, rare: 30, epic: 35, legendary: 20, mythical: 5 } },
                mythical: { price: 2000, chances: { common: 0, rare: 20, epic: 40, legendary: 30, mythical: 10 } }
            };

            let currentDropType = "common";
            let selectedItem = null;
            let selectedItems = [];

            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–¥–∫–æ—Å—Ç—è–º–∏
            function getRarityName(rarity) {
                const names = {
                    common: "–û–±—ã—á–Ω—ã–π",
                    rare: "–†–µ–¥–∫–∏–π",
                    epic: "–≠–ø–∏—á–µ—Å–∫–∏–π",
                    legendary: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π",
                    mythical: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π"
                };
                return names[rarity] || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";
            }

            function getRarityColor(rarity) {
                const colors = {
                    common: "var(--rarity-common)",
                    rare: "var(--rarity-rare)",
                    epic: "var(--rarity-epic)",
                    legendary: "var(--rarity-legendary)",
                    mythical: "var(--rarity-mythical)"
                };
                return colors[rarity] || "gray";
            }

            function getRarityValue(rarity) {
                const values = {
                    common: 1,
                    rare: 2,
                    epic: 3,
                    legendary: 4,
                    mythical: 5
                };
                return values[rarity] || 0;
            }

            function getNextRarity(rarity) {
                const nextRarities = {
                    common: "rare",
                    rare: "epic",
                    epic: "legendary",
                    legendary: "mythical",
                    mythical: "mythical"
                };
                return nextRarities[rarity] || "common";
            }

            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab).classList.add('active');
                    
                    // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
                    if (this.dataset.tab === 'inventory-tab') {
                        resetSelection();
                    }
                });
            });

            // –ü–æ–∫—É–ø–∫–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –¥—Ä–æ–ø–æ–≤
            document.querySelectorAll('.buy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dropType = this.dataset.type;
                    const dropPrice = drops[dropType].price;
                    
                    if (userData.coins < dropPrice) {
                        alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
                        return;
                    }
                    
                    userData.coins -= dropPrice;
                    currentDropType = dropType;
                    
                    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ä—É–ª–µ—Ç–∫–∏
                    startRoulette(dropType);
                });
            });

            // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —Ä—É–ª–µ—Ç–∫–∏
            function startRoulette(dropType) {
                const rouletteOverlay = document.getElementById('roulette-overlay');
                const rouletteItems = document.getElementById('roulette-items');
                
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                rouletteItems.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏ (30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
                for (let i = 0; i < 30; i++) {
                    const item = getRandomPrize(dropType);
                    const rouletteItem = document.createElement('div');
                    rouletteItem.className = 'roulette-item';
                    rouletteItem.innerHTML = item.emoji;
                    rouletteItem.style.color = getRarityColor(item.rarity);
                    rouletteItems.appendChild(rouletteItem);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–∞–¥–µ—Ç (–≤ —Å–µ—Ä–µ–¥–∏–Ω–µ)
                const realPrize = getRandomPrize(dropType);
                const prizeElement = document.createElement('div');
                prizeElement.className = 'roulette-item';
                prizeElement.innerHTML = realPrize.emoji;
                prizeElement.style.color = getRarityColor(realPrize.rarity);
                prizeElement.dataset.prize = JSON.stringify(realPrize);
                rouletteItems.appendChild(prizeElement);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—É–ª–µ—Ç–∫—É
                rouletteOverlay.classList.add('active');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                setTimeout(() => {
                    const itemsHeight = rouletteItems.scrollHeight;
                    const containerHeight = document.querySelector('.roulette-container').offsetHeight;
                    const targetPosition = itemsHeight - containerHeight / 2 - 40;
                    
                    rouletteItems.style.top = `-${targetPosition}px`;
                    
                    // –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–∑
                    setTimeout(() => {
                        userData.openedDrops++;
                        userData.inventory.push(realPrize);
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∞–º—É—é —Ä–µ–¥–∫—É—é –≤–µ—â—å
                        if (!userData.rarestItem || getRarityValue(realPrize.rarity) > getRarityValue(userData.rarestItem.rarity)) {
                            userData.rarestItem = realPrize;
                        }
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                        updateUserInterface();
                        updateInventory();
                        
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                        saveUserData();
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∏–∑–æ–º
                        setTimeout(() => {
                            rouletteOverlay.classList.remove('active');
                            showPrizeModal(realPrize);
                        }, 1000);
                    }, 5000);
                }, 100);
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä—É–ª–µ—Ç–∫–∏
            document.getElementById('roulette-close').addEventListener('click', function() {
                document.getElementById('roulette-overlay').classList.remove('active');
            });

            // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–∏–∑–∞
            function getRandomPrize(dropType) {
                const chances = drops[dropType].chances;
                const rand = Math.random() * 100;
                
                let rarity;
                if (rand < chances.common) rarity = "common";
                else if (rand < chances.common + chances.rare) rarity = "rare";
                else if (rand < chances.common + chances.rare + chances.epic) rarity = "epic";
                else if (rand < chances.common + chances.rare + chances.epic + chances.legendary) rarity = "legendary";
                else rarity = "mythical";
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º –ø—Ä–µ–¥–º–µ—Ç—ã –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ –∏ –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π
                const availableItems = items.filter(item => item.rarity === rarity);
                const randomItem = availableItems[Math.floor(Math.random() * availableItems.length)];
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å—Å—ã–ª–æ–∫
                return {...randomItem};
            }

            // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –ø—Ä–∏–∑–æ–º
            function showPrizeModal(prize) {
                selectedItem = prize;
                
                document.getElementById('modal-prize-emoji').textContent = prize.emoji;
                document.getElementById('modal-prize-name').textContent = prize.name;
                document.getElementById('modal-prize-rarity').textContent = getRarityName(prize.rarity);
                document.getElementById('modal-prize-rarity').className = `modal-rarity ${prize.rarity}`;
                document.getElementById('modal-prize-price').textContent = prize.price;
                
                document.getElementById('prize-modal').classList.add('active');
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('modal-close-btn').addEventListener('click', function() {
                document.getElementById('prize-modal').classList.remove('active');
                selectedItem = null;
            });

            // –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
            document.getElementById('modal-sell-btn').addEventListener('click', function() {
                if (!selectedItem) return;
                
                userData.coins += selectedItem.price;
                userData.soldItems++;
                
                // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                const index = userData.inventory.findIndex(item => item.id === selectedItem.id);
                if (index !== -1) {
                    userData.inventory.splice(index, 1);
                }
                
                // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∞ —Å–∞–º–∞—è —Ä–µ–¥–∫–∞—è –≤–µ—â—å, –Ω–∞—Ö–æ–¥–∏–º –Ω–æ–≤—É—é
                if (userData.rarestItem && userData.rarestItem.id === selectedItem.id) {
                    userData.rarestItem = userData.inventory.reduce((rarest, item) => {
                        if (!rarest || getRarityValue(item.rarity) > getRarityValue(rarest.rarity)) {
                            return item;
                        }
                        return rarest;
                    }, null);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateUserInterface();
                updateInventory();
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                document.getElementById('prize-modal').classList.remove('active');
                selectedItem = null;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                saveUserData();
            });

            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
            document.getElementById('apply-promo').addEventListener('click', function() {
                const promoCode = document.getElementById('promo-code').value.trim();
                const promoMessage = document.getElementById('promo-message');
                
                if (promoCode.toLowerCase() === 'sigma') {
                    userData.coins += 200;
                    promoMessage.textContent = '–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω! +200 –º–æ–Ω–µ—Ç';
                    promoMessage.style.color = 'var(--success)';
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    updateUserInterface();
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    saveUserData();
                } else {
                    promoMessage.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥';
                    promoMessage.style.color = 'var(--danger)';
                }
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                document.getElementById('promo-code').value = '';
            });

            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
            function updateInventory() {
                const inventoryGrid = document.getElementById('inventory-grid');
                inventoryGrid.innerHTML = '';
                
                if (userData.inventory.length === 0) {
                    inventoryGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px 20px; color: var(--text-secondary);">
                            <div style="font-size: 40px; margin-bottom: 16px;">üéÅ</div>
                            <p>–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>
                            <p>–ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –¥—Ä–æ–ø—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑—ã</p>
                        </div>
                    `;
                    return;
                }
                
                userData.inventory.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'inventory-item';
                    itemElement.style.border = `2px solid ${getRarityColor(item.rarity)}`;
                    itemElement.innerHTML = `
                        <div class="item-image">${item.emoji}</div>
                        <div class="item-info">
                            <div class="item-name">${item.name}</div>
                            <div class="item-rarity ${item.rarity}">${getRarityName(item.rarity)}</div>
                        </div>
                    `;
                    
                    itemElement.addEventListener('click', () => {
                        if (selectedItems.includes(index)) {
                            // –£–±–∏—Ä–∞–µ–º –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
                            selectedItems = selectedItems.filter(i => i !== index);
                            itemElement.classList.remove('selected');
                        } else {
                            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
                            selectedItems.push(index);
                            itemElement.classList.add('selected');
                        }
                        
                        updateCombineButton();
                    });
                    
                    inventoryGrid.appendChild(itemElement);
                });
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
            function updateCombineButton() {
                const combineBtn = document.getElementById('combine-btn');
                if (selectedItems.length >= 5) {
                    combineBtn.disabled = false;
                    combineBtn.style.opacity = '1';
                } else {
                    combineBtn.disabled = true;
                    combineBtn.style.opacity = '0.7';
                }
            }

            // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞
            function resetSelection() {
                selectedItems = [];
                document.querySelectorAll('.inventory-item').forEach(item => {
                    item.classList.remove('selected');
                });
                updateCombineButton();
            }

            // –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            document.getElementById('combine-btn').addEventListener('click', function() {
                if (selectedItems.length < 5) return;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ª–∏ —Ä–µ–¥–∫–æ—Å—Ç–∏ –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                const firstRarity = userData.inventory[selectedItems[0]].rarity;
                const allSameRarity = selectedItems.every(index => 
                    userData.inventory[index].rarity === firstRarity
                );
                
                if (!allSameRarity) {
                    alert('–î–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏!');
                    resetSelection();
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–µ–¥–∫–æ—Å—Ç–∏
                const nextRarity = getNextRarity(firstRarity);
                
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç
                const availableItems = items.filter(item => item.rarity === nextRarity);
                const newItem = {...availableItems[Math.floor(Math.random() * availableItems.length)]};
                
                // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é, —á—Ç–æ–±—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–µ —Å–¥–≤–∏–≥–∞–ª–∏—Å—å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
                selectedItems.sort((a, b) => b - a).forEach(index => {
                    userData.inventory.splice(index, 1);
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç
                userData.inventory.push(newItem);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∞–º—É—é —Ä–µ–¥–∫—É—é –≤–µ—â—å
                if (!userData.rarestItem || getRarityValue(newItem.rarity) > getRarityValue(userData.rarestItem.rarity)) {
                    userData.rarestItem = newItem;
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
                resetSelection();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateUserInterface();
                updateInventory();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –Ω–æ–≤—ã–º –ø—Ä–µ–¥–º–µ—Ç–æ–º
                showPrizeModal(newItem);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                saveUserData();
            });

            // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function saveUserData() {
                localStorage.setItem('bahraz_userData', JSON.stringify(userData));
            }

            // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            function loadUserData() {
                const savedData = localStorage.getItem('bahraz_userData');
                if (savedData) {
                    userData = JSON.parse(savedData);
                }
                updateUserInterface();
                updateInventory();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            loadUserData();
        });
    </script>
</body>
  </html>
